<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Classe D&D 5e - Versão Completa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Biblioteca para gerar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* CSS Integrado */
        body {
            background-color: #f5e9d3; /* Cor de pergaminho */
            color: #4b3a26;
            font-family: 'Lora', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        #container {
            background-color: #fffdf7;
            border: 2px solid #c8b79b;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 800px;
            text-align: center;
        }

        h1, h2, h3 {
            font-family: 'Cinzel', serif;
            color: #8c2317; /* Vermelho escuro, como tinta antiga */
        }

        p {
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .screen {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .hidden {
            display: none;
        }

        button {
            font-family: 'Cinzel', serif;
            font-size: 1rem;
            padding: 12px 24px;
            background-color: #8c2317;
            color: #fffdf7;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin: 5px;
        }

        button:hover {
            background-color: #6a1a10;
            transform: translateY(-2px);
        }
        
        #save-pdf-btn {
            background-color: #004d40; /* Verde escuro */
        }
        
        #save-pdf-btn:hover {
            background-color: #00382e;
        }

        .btn-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            margin-top: 20px;
        }

        .btn-grid button {
            width: 100%;
            height: 100%;
            min-height: 80px;
            font-size: 0.95rem;
            font-family: 'Lora', serif;
            background-color: #5a4b3a;
        }

        .btn-grid button:hover {
            background-color: #4b3a26;
        }

        .race-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            width: 100%;
        }

        .race-card {
            background-color: #f5e9d3;
            border: 1px solid #c8b79b;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: box-shadow 0.3s, transform 0.3s;
        }

        .race-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .race-card h4 {
            margin: 0 0 10px 0;
            font-family: 'Cinzel', serif;
            color: #8c2317;
        }

        .race-card p {
            font-size: 0.9rem;
            margin: 0;
        }

        .summary-details {
            display: flex;
            justify-content: space-around;
            text-align: left;
            width: 100%;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 600px) {
            .summary-details {
                flex-direction: column;
            }
        }

        .summary-column {
            flex: 1;
            background: #f5e9d333;
            padding: 15px;
            border-radius: 5px;
        }

        .summary-column h3 {
            margin-top: 0;
        }

        .summary-column ul {
            padding-left: 20px;
        }
        .summary-column ul li {
            margin-bottom: 10px;
        }

        .modifiers {
            margin-top: 20px;
            background-color: #4b3a26;
            color: #fffdf7;
            padding: 15px;
            border-radius: 5px;
        }
        
        .equipment {
            margin-top: 20px;
            background-color: #f5e9d333;
            padding: 15px;
            border-radius: 5px;
            text-align: left;
        }
        
        .equipment ul {
             padding-left: 20px;
        }

        .equipment ul li {
            margin-bottom: 5px;
        }

        .equipment p {
            margin-top: 15px;
            font-weight: bold;
            text-align: center;
        }

        .modifiers h3 {
            color: #f5e9d3;
            margin-top: 0;
        }

        #restart-btn {
            margin-top: 20px;
            background-color: #333;
        }
        #restart-btn:hover {
            background-color: #555;
        }
    </style>
</head>
<body>

    <div id="container">
        <!-- Tela Inicial -->
        <div id="start-screen" class="screen">
            <h1>Descubra sua Classe em D&D</h1>
            <p>Responda algumas perguntas para encontrar a classe que mais combina com seu estilo de jogo.</p>
            <button id="start-btn">Começar o Quiz</button>
        </div>

        <!-- Tela do Quiz -->
        <div id="quiz-screen" class="screen hidden">
            <h2 id="question-title"></h2>
            <div id="answer-buttons" class="btn-grid">
                <!-- Botões de resposta serão gerados aqui -->
            </div>
        </div>

        <!-- Tela de Resultado da Classe -->
        <div id="class-result-screen" class="screen hidden">
            <h2 id="class-title"></h2>
            <p id="class-description"></p>
            <h3>Raças Recomendadas</h3>
            <div id="race-selection" class="race-grid">
                <!-- Opções de raça serão geradas aqui -->
            </div>
        </div>
        
        <!-- Tela Final do Personagem -->
        <div id="final-summary-screen" class="screen hidden">
            <h2 id="summary-title"></h2>
            <p id="summary-combination-description"></p>
            
            <div class="summary-details">
                <div class="summary-column">
                    <h3>Características Positivas</h3>
                    <ul id="positive-traits"></ul>
                </div>
                <div class="summary-column">
                    <h3>Características Negativas</h3>
                    <ul id="negative-traits"></ul>
                </div>
            </div>

            <div class="modifiers">
                <h3>Modificadores Finais de Atributo</h3>
                <p id="final-modifiers"></p>
            </div>
            
            <div class="equipment">
                <h3>Equipamento Inicial & Riqueza</h3>
                <ul id="equipment-list"></ul>
                <p id="starting-gold"></p>
            </div>
            
            <div>
                <button id="save-pdf-btn">Salvar em PDF</button>
                <button id="restart-btn">Recomeçar</button>
            </div>
        </div>

    </div>

    <script>
        // JavaScript Integrado
        document.addEventListener('DOMContentLoaded', () => {
            // Referências aos elementos da tela
            const startScreen = document.getElementById('start-screen');
            const quizScreen = document.getElementById('quiz-screen');
            const classResultScreen = document.getElementById('class-result-screen');
            const finalSummaryScreen = document.getElementById('final-summary-screen');

            const startBtn = document.getElementById('start-btn');
            const restartBtn = document.getElementById('restart-btn');
            const savePdfBtn = document.getElementById('save-pdf-btn');

            const questionTitle = document.getElementById('question-title');
            const answerButtons = document.getElementById('answer-buttons');
            
            // Variáveis de estado do quiz
            let currentQuestionIndex = 0;
            let classScores = {};
            let selectedClassKey = '';
            let selectedRaceKey = '';
            
            // --- DADOS DO JOGO (CLASSES, RAÇAS, QUIZ) ---

            const attributeTranslations = {
                strength: 'Força',
                dexterity: 'Destreza',
                constitution: 'Constituição',
                intelligence: 'Inteligência',
                wisdom: 'Sabedoria',
                charisma: 'Carisma'
            };

            const classes = {
                barbaro: {
                    name: 'Bárbaro',
                    description: 'Um guerreiro feroz que canaliza sua fúria primordial em combate. Sua força bruta e resistência são incomparáveis no campo de batalha.',
                    attributePriority: ['strength', 'constitution', 'dexterity', 'wisdom', 'intelligence', 'charisma'],
                    startingEquipment: ["Um machado grande (ou outra arma marcial)", "Dois machados de mão", "Quatro azagaias", "Pacote de Explorador (incluindo mochila, saco de dormir, kit de refeição, caixa de fogo, 10 tochas, 10 dias de rações, cantil e 15m de corda)"],
                    startingGold: "2d4 x 10 Ouro (Média: 50 PO)",
                    recommendedRaces: ['anao_montanha', 'meio_orc', 'humano'],
                    combinations: {
                        anao_montanha: { description: 'Um pilar de resiliência e fúria. A tenacidade dos anões combinada com a selvageria do bárbaro cria um guerreiro quase imparável.', positive: ['Fúria Implacável: Seu ataque é um golpe esmagador com um machado grande.', 'Resistência da Pedra: Incrivelmente durão, capaz de ignorar ferimentos que derrubariam outros.', 'Vigor Primitivo: Movido por uma energia selvagem que o torna mais forte em combate.'], negative: ['Pavío Curto: Sua fúria o torna impulsivo e difícil de controlar.', 'Visão de Túnel: Em combate, pode ignorar objetivos táticos em favor da violência.', 'Socialmente Brusco: Falta-lhe a fineza para negociações delicadas.'] },
                        meio_orc: { description: 'Nascido para o combate, o Bárbaro Meio-Orc é a personificação da selvageria. Seus ataques são devastadores e sua capacidade de resistir à morte é lendária.', positive: ['Ataque Selvagem: Canaliza sua herança em um golpe crítico devastador.', 'Resistência Implacável: Quando deveria cair, uma centelha de sua ancestralidade o mantém de pé.', 'Força Incomparável: Seu ataque principal é um golpe brutal e pesado.'], negative: ['Preconceito: Sua aparência intimidadora pode fazer com que outros o julguem mal.', 'Mente Simples: Prefere soluções diretas e violentas.', 'Fúria Cega: Pode ter dificuldade em distinguir amigo de inimigo no calor da batalha.'] },
                        humano: { description: 'A adaptabilidade humana encontra a fúria primitiva. Este bárbaro é versátil, talvez vindo de uma tribo distante ou sendo um gladiador.', positive: ['Fúria Versátil: Aplica sua raiva em uma variedade de armas e situações.', 'Coração Indomável: Sua determinação o impulsiona a lutar contra todas as probabilidades.', 'Ataque Focado: Um ataque poderoso e calculado com uma arma de duas mãos.'], negative: ['Vida Curta, Raiva Longa: Sua mortalidade pode levá-lo a ações impensadas.', 'Sem Especialidade Inata: Depende puramente de sua fúria e treinamento.', 'Normal Demais: Pode se sentir ofuscado por aliados com habilidades exóticas.'] }
                    }
                },
                bardo: {
                    name: 'Bardo',
                    description: 'Um mestre da música, da magia e do carisma. Bardos usam suas palavras e canções para inspirar aliados, desmoralizar inimigos e manipular a própria realidade.',
                    attributePriority: ['charisma', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'strength'],
                    startingEquipment: ["Uma rapieira", "Um alaúde (ou outro instrumento)", "Armadura de couro e uma adaga", "Escolha um: Pacote de Diplomata (inclui baú, 2 caixas p/ mapas, roupas finas, tinta, caneta, lampião, óleo, papel, perfume, cera, sabão) OU Pacote de Artista (inclui mochila, saco de dormir, 2 fantasias, 5 velas, rações, cantil, kit de disfarce)"],
                    startingGold: "5d4 x 10 Ouro (Média: 125 PO)",
                    recommendedRaces: ['meio_elfo', 'halfling_pes_leves', 'humano'],
                    combinations: {
                        meio_elfo: { description: 'O artista e diplomata por natureza. O carisma inato dos meio-elfos os torna bardos excepcionais, capazes de encantar cortes e acalmar monstros.', positive: ['Inspiração Cativante: Suas músicas e palavras (magia sutil, de cores variadas como um arco-íris) elevam o moral dos aliados.', 'Encanto Natural: Facilmente faz amigos e influencia pessoas com sua lábia.', 'Mestre dos Ofícios: Possui uma variedade surpreendente de habilidades úteis.'], negative: ['Frágil Fisicamente: Evita o combate direto, não tendo muita resistência.', 'Coração Inquieto: Pode se sentir um estranho em ambos os mundos, humano e élfico.', 'Foco Disperso: Tenta ser bom em tudo, mas pode não ser o melhor em nada.'] },
                        halfling_pes_leves: { description: 'Um contador de histórias viajante, sempre com um sorriso e uma canção. Sua sorte natural e furtividade o tornam um bardo surpreendentemente eficaz.', positive: ['Melodia Furtiva: Usa sua música para distrair guardas e criar aberturas.', 'Sorte Inspiradora: Sua sorte inata parece se espalhar para seus aliados durante suas canções.', 'Espírito Animado: Um otimista contagiante, ótimo para manter o grupo unido.'], negative: ['Medo do Perigo: Prefere falar para sair dos problemas do que lutar.', 'Tamanho Pequeno: Pode não ser levado a sério como um herói épico.', 'Curiosidade Problemática: Seu amor por histórias pode levá-lo a lugares perigosos.'] },
                        humano: { description: 'O bardo ambicioso, seja buscando a fama em grandes palcos ou os segredos em tavernas escuras. Sua versatilidade o permite ser qualquer tipo de artista.', positive: ['Versatilidade Artística: Adapta seu estilo musical e mágico para qualquer situação.', 'Ambição Motivadora: Busca incessantemente por conhecimento e histórias para suas canções.', 'Líder Carismático: Facilmente se torna o rosto e a voz do grupo de aventureiros.'], negative: ['Ego Inflado: A fama e os aplausos podem subir à sua cabeça.', 'Dependente do Público: Pode tomar decisões ruins para agradar a multidão ou ganhar um patrono.', 'Um Pouco de Tudo: Pode não ter a especialização mágica de um mago ou a fé de um clérigo.'] }
                    }
                },
                clerigo: {
                    name: 'Clérigo',
                    description: 'Um guerreiro divino que canaliza o poder de sua fé. Clérigos são curandeiros, protetores e combatentes, usando magia sagrada para ajudar aliados e destruir inimigos.',
                    attributePriority: ['wisdom', 'constitution', 'strength', 'charisma', 'dexterity', 'intelligence'],
                    startingEquipment: ["Uma maça", "Armadura de cota de malha", "Um escudo e um símbolo sagrado", "Escolha um: Pacote de Sacerdote (inclui mochila, cobertor, 10 velas, caixa de fogo, caixa de esmolas, incenso, paramentos, rações, cantil) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "5d4 x 10 Ouro (Média: 125 PO)",
                    recommendedRaces: ['anao_colina', 'humano', 'meio_elfo'],
                    combinations: {
                        anao_colina: { description: 'Um pilar de fé e resistência. O Clérigo Anão da Colina é um curandeiro de linha de frente, usando armadura pesada e bênçãos divinas para proteger seu rebanho.', positive: ['Martelo Divino: Seu ataque é uma pancada com um martelo, imbuído com luz dourada.', 'Cura Resiliente: Suas magias de cura (luz branca e suave) são potencializadas por sua própria vitalidade.', 'Fé de Aço: Veste armadura pesada, tornando-se um farol de esperança na batalha.'], negative: ['Dogmático: Sua fé pode torná-lo inflexível e julgador.', 'Movimento Lento: Sua armadura pesada e pernas curtas o tornam lento.', 'Dever Divino: Está sempre a serviço de sua divindade, o que pode criar conflitos.'] },
                        humano: { description: 'Um líder carismático ou um humilde servo de um deus. A versatilidade humana permite que este clérigo se adapte a qualquer papel no grupo.', positive: ['Chama Sagrada: Invoca uma coluna de fogo celestial (magia branca e dourada) à distância.', 'Inspiração Divina: Sua fé inspira coragem e determinação em seus aliados.', 'Canal da Fé: Manifesta milagros que podem mudar o rumo da batalha.'], negative: ['Crise de Fé: Sendo humano, sua fé pode ser abalada por tragédias.', 'Obrigação com o Templo: Muitas vezes tem responsabilidades com uma igreja ou ordem.', 'Alvo Principal: Inimigos inteligentes sabem que eliminar o curandeiro é a chave.'] },
                        meio_elfo: { description: 'Um diplomata da fé, unindo o mundo dos homens e dos deuses com carisma e devoção. Este clérigo é excelente em interações sociais e um suporte versátil.', positive: ['Palavra de Cura: Suas magias de cura (luz azul-clara) são proferidas com uma voz calmante.', 'Encanto Divino: Usa seu carisma para converter descrentes ou acalmar situações hostis.', 'Versatilidade Abençoada: Eficaz tanto em combate quanto em negociações.'], negative: ['Menos Focado: Pode não ser tão poderoso em uma única área quanto outros clérigos.', 'Conflito de Identidade: Pode se sentir dividido entre suas heranças e sua devoção.', 'Armadura Média: Geralmente mais vulnerável que um clérigo anão.'] }
                    }
                },
                druida: {
                    name: 'Druida',
                    description: 'Um sacerdote da natureza, que extrai poder do mundo natural. Druidas podem se transformar em animais, comandar plantas e invocar a fúria dos elementos.',
                    attributePriority: ['wisdom', 'constitution', 'dexterity', 'intelligence', 'strength', 'charisma'],
                    startingEquipment: ["Um escudo de madeira", "Uma cimitarra", "Armadura de couro e um foco druídico", "Pacote de Explorador (incluindo mochila, saco de dormir, kit de refeição, caixa de fogo, 10 tochas, 10 dias de rações, cantil e 15m de corda)"],
                    startingGold: "2d4 x 10 Ouro (Média: 50 PO)",
                    recommendedRaces: ['elfo_floresta', 'anao_colina', 'humano'],
                    combinations: {
                        elfo_floresta: { description: 'Em perfeita harmonia com o mundo selvagem. Este druida é um protetor ágil dos bosques, movendo-se silenciosamente e falando com os animais como iguais.', positive: ['Metamorfose Ágil: Transforma-se em animais rápidos e furtivos, como lobos ou panteras.', 'Chicote de Espinhos: Seu ataque mágico é um chicote verdejante que puxa os inimigos.', 'Um com a Natureza: Praticamente invisível em ambientes naturais.'], negative: ['Desconfiança da Civilização: Vê cidades como cicatrizes no mundo.', 'Fisicamente Delicado: Fora de sua forma animal, não é muito resistente.', 'Vingança da Natureza: Pode ser excessivamente punitivo com aqueles que desrespeitam a natureza.'] },
                        anao_colina: { description: 'Um guardião das raízes da montanha. Este druida tem uma conexão com a pedra e a terra, sendo resiliente como o granito e invocando o poder da terra.', positive: ['Forma de Urso: Sua forma de combate preferida é a de um urso resistente.', 'Sabedoria da Pedra: Conhece os segredos do subterrâneo e das montanhas.', 'Resiliência Natural: Sua constituição robusta o torna um conjurador durável.'], negative: ['Lento e Metódico: Não é o mais rápido ou ágil dos druidas.', 'Teimoso: Difícil de convencer a abandonar um caminho que ele acredita ser o certo.', 'Isolacionista: Prefere a companhia de animais e plantas à de pessoas.'] },
                        humano: { description: 'O druida que busca o equilíbrio entre o mundo civilizado e o selvagem. Ele entende ambos os lados e luta para protegê-los de ameaças externas.', positive: ['Harmonia Versátil: Capaz de se adaptar, seja se transformando em animais ou conjurando feitiços elementais.', 'Fogo das Fadas: Invoca chamas mágicas (de cor azul ou violeta) para guiar aliados e queimar inimigos.', 'Embaixador da Natureza: Consegue argumentar com reis e lobos com a mesma eficácia.'], negative: ['Conflito Interno: Dividido entre seus deveres para com a natureza e a sociedade.', 'Sem Afinidade Inata: Não possui as vantagens naturais de um elfo ou anão.', 'Poder Equilibrado: Pode não atingir os extremos de poder de druidas mais selvagens.'] }
                    }
                },
                guerreiro: {
                    name: 'Guerreiro',
                    description: 'Um mestre do combate armado. O guerreiro é versátil, disciplinado e letal, seja com uma espada, um arco ou qualquer outra arma que empunhe.',
                    attributePriority: ['strength', 'constitution', 'dexterity', 'wisdom', 'charisma', 'intelligence'],
                    startingEquipment: ["Cota de malha", "Uma espada longa e um escudo", "Um arco longo e 20 flechas", "Escolha um: Pacote de Aventureiro (inclui mochila, pé de cabra, martelo, 10 pítons, 10 tochas, caixa de fogo, 10 dias de rações, cantil) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "5d4 x 10 Ouro (Média: 125 PO)",
                    recommendedRaces: ['humano', 'anao_montanha', 'draconato'],
                    combinations: {
                        humano: { description: 'O arquétipo do soldado, mercenário ou cavaleiro. O Guerreiro Humano é um exemplo de disciplina e versatilidade, capaz de se destacar em qualquer estilo de combate.', positive: ['Mestre Tático: Seu ataque comum é uma sequência de golpes precisos.', 'Surto de Ação: Capaz de uma explosão de velocidade, agindo duas vezes no mesmo turno.', 'Espírito Adaptável: Aprende rapidamente e pode usar uma vasta gama de armas.'], negative: ['Solução Mundana: Tende a resolver problemas com violência.', 'Dependente de Equipamento: Sua eficácia está ligada à qualidade de seu equipamento.', 'Falta de "Magia": Em um mundo de feitiços, ele é "apenas" um humano habilidoso.'] },
                        anao_montanha: { description: 'Um baluarte de aço e determinação. O Guerreiro Anão da Montanha é um defensor impenetrável e um combatente resiliente, perfeito na linha de frente.', positive: ['Defensor Rochoso: Seu estilo de ataque é metódico e defensivo.', 'Fortaleza de Placas: Sua afinidade com armaduras pesadas o torna muito protegido.', 'Vigor de Anão: Sua constituição robusta o permite suportar longas batalhas.'], negative: ['Lento e Constante: Sua velocidade é limitada por sua armadura.', 'Teimoso como Pedra: Sua determinação pode se transformar em teimosia.', 'Ceticismo Mágico: Desconfia de magias, preferindo a confiabilidade do aço.'] },
                        draconato: { description: 'Um combatente imponente cuja linhagem dracônica se manifesta em cada golpe. Ele combina treinamento marcial com o poder elemental de seus ancestrais.', positive: ['Ataque Elemental: Seus golpes podem carregar a energia de seu sopro (fogo, gelo, etc).', 'Presença Dracônica: Sua aparência intimida inimigos e inspira aliados.', 'Sopro de Dragão: Uma arma surpresa que pode atingir múltiplos inimigos de uma vez.'], negative: ['Alvo Grande: Sua estatura e aparência chamam muita atenção em combate.', 'Arrogância Dracônica: Pode ser orgulhoso e subestimar adversários menores.', 'Vulnerabilidade Oposta: Possui uma fraqueza elemental ligada à sua ancestralidade.'] }
                    }
                },
                monge: {
                    name: 'Monge',
                    description: 'Um mestre das artes marciais, que usa o poder de seu corpo e mente. Monges são rápidos, mortais e capazes de feitos sobre-humanos através de sua energia interior, o Ki.',
                    attributePriority: ['dexterity', 'wisdom', 'constitution', 'strength', 'charisma', 'intelligence'],
                    startingEquipment: ["Uma espada curta", "10 dardos", "Escolha um: Pacote de Aventureiro (inclui mochila, pé de cabra, martelo, 10 pítons, 10 tochas, rações, cantil) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "5d4 Ouro (Média: 12 PO, 5 PP)",
                    recommendedRaces: ['elfo_floresta', 'humano', 'halfling_robusto'],
                    combinations: {
                        elfo_floresta: { description: 'A graça élfica transformada em uma arte marcial letal. Este monge é um combatente rápido e perceptivo, quase impossível de ser atingido.', positive: ['Rajada de Golpes: Desfere uma sequência de socos e chutes rápidos como o vento.', 'Deflexão de Projéteis: Capaz de aparar flechas no ar com as mãos.', 'Percepção Aguçada: Seus sentidos apurados o tornam um sentinela perfeito.'], negative: ['Força Bruta Baixa: Seus golpes dependem de velocidade, não de força.', 'Pouca Armadura: Confia em sua agilidade para se defender, o que é arriscado.', 'Disciplina Rígida: Pode ter dificuldade em se conectar com aliados mais caóticos.'] },
                        humano: { description: 'O monge que busca a perfeição através da disciplina e adaptabilidade. Ele pode vir de um monastério isolado ou ter aprendido a lutar nas ruas.', positive: ['Punho Disciplinado: Combina técnica e foco para desferir golpes precisos que atordoam.', 'Mente Calma: Sua meditação o torna resistente a feitiços de medo e charme.', 'Vontade de Aço: Sua determinação humana o impulsiona a superar seus limites físicos.'], negative: ['Mortal e Vulnerável: Sem as resistências de outras raças, ele depende totalmente de sua técnica.', 'Dilema Moral: Sua filosofia pacifista pode entrar em conflito com a vida de aventureiro.', 'Estranho na Multidão: Seus costumes monásticos podem parecer estranhos para os outros.'] },
                        halfling_robusto: { description: 'A resiliência de um halfling combinada com a disciplina de um monge. Este lutador surpreendente usa seu tamanho pequeno para se esquivar e atacar pontos vitais.', positive: ['Técnica do Bêbado Sortudo: Seus movimentos imprevisíveis o tornam difícil de acertar.', 'Resistência a Venenos: Sua natureza robusta o ajuda a resistir a toxinas.', 'Pequeno Alvo: Usa seu tamanho para se mover entre as pernas de inimigos maiores.'], negative: ['Alcance Curto: Precisa chegar muito perto para ser eficaz.', 'Força Mínima: Não consegue empurrar ou levantar objetos pesados.', 'Subestimado: Inimigos podem não levá-lo a sério, o que é bom e ruim.'] }
                    }
                },
                paladino: {
                    name: 'Paladino',
                    description: 'Um campeão sagrado que fez um juramento de proteger o bem e a justiça. Paladinos são guerreiros divinos, combinando poder marcial com magia sagrada.',
                    attributePriority: ['strength', 'charisma', 'constitution', 'wisdom', 'intelligence', 'dexterity'],
                    startingEquipment: ["Uma espada longa e um escudo", "Cota de malha", "Um símbolo sagrado", "Escolha um: Pacote de Sacerdote (inclui mochila, cobertor, 10 velas, caixa de esmolas, incenso, paramentos, rações, cantil) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "5d4 x 10 Ouro (Média: 125 PO)",
                    recommendedRaces: ['draconato', 'humano', 'anao_montanha'],
                    combinations: {
                        draconato: { description: 'Uma visão de poder e retidão. O Paladino Draconato é um campeão inspirador, cuja fé é tão poderosa quanto o sopro de seus ancestrais.', positive: ['Golpe Divino: Infunde sua arma com energia radiante (luz dourada) que queima os maus.', 'Aura de Proteção: Sua presença protege seus aliados de feitiços e perigos.', 'Liderança Inspiradora: Sua convicção e carisma motivam todos ao seu redor.'], negative: ['Código Rígido: Seu juramento impõe limites estritos em suas ações.', 'Justiça Cega: Pode ser inflexível em seus julgamentos, vendo o mundo em preto e branco.', 'Excesso de Confiança: Sua fé em sua causa pode levá-lo a subestimar os inimigos.'] },
                        humano: { description: 'O cavaleiro da esperança. Este paladino luta por um ideal, seja por um reino, um deus ou simplesmente pela crença de que o mundo pode ser um lugar melhor.', positive: ['Determinação Sagrada: Sua fé humana é uma força poderosa contra as trevas.', 'Mão Divina: Pode curar ferimentos com um toque de sua mão.', 'Versatilidade de Juramento: Seu juramento pode ser adaptado a uma variedade de causas nobres.'], negative: ['Fardo do Juramento: O peso de suas promessas pode ser esmagador.', 'Conflito Moral: Pode enfrentar situações onde não há uma escolha claramente "boa".', 'Mártir em Potencial: Propenso a se sacrificar por sua causa.'] },
                        anao_montanha: { description: 'Um bastião de fé e aço. Este paladino é um defensor incansável de seu clã e de seus juramentos, um guerreiro sagrado que não recua um centímetro.', positive: ['Defensor Inabalável: Usa armadura pesada e um escudo para ser a muralha de seu grupo.', 'Juramento de Pedra: Sua palavra é tão sólida e inquebrável quanto a montanha.', 'Ira Divina: Canaliza sua fúria justa em golpes devastadores contra seus inimigos.'], negative: ['Teimosia Sagrada: Uma vez que decide um curso de ação, é quase impossível demovê-lo.', 'Lento Vingador: Não é o mais rápido para chegar ao campo de batalha.', 'Desconfiança: Pode ser cético em relação àqueles que não compartilham de sua dedicação.'] }
                    }
                },
                patrulheiro: {
                    name: 'Patrulheiro',
                    description: 'Um guerreiro das terras selvagens, especialista em rastrear e caçar. Patrulheiros são mestres do arco e da lâmina, com uma forte conexão com a natureza.',
                    attributePriority: ['dexterity', 'wisdom', 'constitution', 'intelligence', 'strength', 'charisma'],
                    startingEquipment: ["Armadura de couro batido", "Duas espadas curtas", "Um arco longo e 20 flechas", "Escolha um: Pacote de Aventureiro (inclui mochila, pé de cabra, martelo, 10 pítons, 10 tochas, rações, cantil) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "5d4 x 10 Ouro (Média: 125 PO)",
                    recommendedRaces: ['elfo_floresta', 'humano', 'anao_colina'],
                    combinations: {
                        elfo_floresta: { description: 'O arqueiro e rastreador arquetípico. Nascido e criado na floresta, este patrulheiro é um predador silencioso e um guardião da natureza.', positive: ['Tiro Preciso: Seu ataque comum é uma flecha certeira disparada de um local escondido.', 'Mestre Rastreador: Pode seguir pegadas que outros nem sequer veriam.', 'Amigo dos Animais: Muitas vezes acompanhado por um companheiro animal leal.'], negative: ['Isolado: Prefere a solidão das florestas à agitação das cidades.', 'Inimigo Jurado: Pode ter um ódio tão focado em um tipo de criatura que o cega para outros perigos.', 'Poucas Habilidades Sociais: É direto e não tem paciência para a política.'] },
                        humano: { description: 'O caçador de monstros ou o guia experiente. Este patrulheiro aprendeu a sobreviver em diversos terrenos, adaptando suas habilidades para enfrentar qualquer ameaça.', positive: ['Caçador Versátil: Habilidoso com o arco e com duas lâminas em combate corpo a corpo.', 'Conhecimento do Inimigo: Estuda suas presas para explorar suas fraquezas.', 'Resiliência do Viajante: Acostumado a longas jornadas e condições adversas.'], negative: ['Sem Lar Fixo: Sempre em movimento, pode não ter laços fortes com nenhum lugar.', 'Obcecado pela Caça: Sua busca por um inimigo pode colocar o grupo em risco.', 'Coração Selvagem: Pode ter dificuldade em se readaptar à vida na cidade.'] },
                        anao_colina: { description: 'Um guardião das passagens montanhosas e das cavernas profundas. Este patrulheiro é um sobrevivente robusto, especializado em caçar os monstros do subterrâneo.', positive: ['Tiro Firme: Sua postura sólida de anão o torna um arqueiro estável.', 'Explorador Subterrâneo: Conhece os perigos e caminhos do subterrâneo como ninguém.', 'Resistência Incansável: Capaz de rastrear por dias sem se cansar.'], negative: ['Teimoso: Insiste em seguir a presa, mesmo quando é perigoso.', 'Visão Limitada: Acostumado com o subterrâneo, pode não ser tão eficaz em florestas abertas.', 'Grosseiro: Não é conhecido por sua diplomacia ou tato.'] }
                    }
                },
                feiticeiro: {
                    name: 'Feiticeiro',
                    description: 'Um conjurador que nasceu com magia correndo em suas veias. Feiticeiros não estudam magia, eles a são, moldando-a com força de vontade e poder inato.',
                    attributePriority: ['charisma', 'constitution', 'dexterity', 'wisdom', 'intelligence', 'strength'],
                    startingEquipment: ["Uma besta leve e 20 virotes", "Uma bolsa de componentes arcanos", "Duas adagas", "Escolha um: Pacote de Aventureiro (inclui mochila, pé de cabra, martelo, 10 pítons, 10 tochas, rações, cantil) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "3d4 x 10 Ouro (Média: 75 PO)",
                    recommendedRaces: ['meio_elfo', 'draconato', 'humano'],
                    combinations: {
                        meio_elfo: { description: 'O poder mágico inato encontra o carisma natural. Este feiticeiro é um condutor de magia elegante e poderoso, capaz de encantar e destruir com a mesma facilidade.', positive: ['Raio de Gelo: Seu ataque mágico é um feixe de energia congelante (de cor branca azulada) que retarda os inimigos.', 'Metamagia Sutil: Pode conjurar feitiços sem que ninguém perceba.', 'Presença Magnética: Seu poder e carisma o tornam o centro das atenções.'], negative: ['Poder Incontrolável: Sua magia pode ter surtos inesperados e perigosos.', 'Fisicamente Vulnerável: Um alvo fácil se for pego em combate corpo a corpo.', 'Arrogância Inata: Sabe que nasceu especial e pode olhar com desdém para os outros.'] },
                        draconato: { description: 'O sangue do dragão corre forte neste feiticeiro. Seu poder mágico é uma manifestação direta de sua herança, uma força elemental bruta e impressionante.', positive: ['Mãos Flamejantes: Expele um cone de fogo (magia vermelha e laranja) de suas mãos.', 'Escamas Dracônicas: Sua pele oferece uma proteção natural, como uma armadura.', 'Resistência Elemental: Imune ao tipo de dano de sua ancestralidade dracônica.'], negative: ['Destrutivo: Sua magia é poderosa, mas pode causar muitos danos colaterais.', 'Orgulho Feroz: Não aceita insultos à sua honra ou poder.', 'Poder Limitado: Sua magia é focada em um elemento, tornando-o menos versátil.'] },
                        humano: { description: 'Um indivíduo tocado pelo acaso mágico. Este feiticeiro luta para entender e controlar o poder que surgiu dentro de si, movido por ambição ou medo.', positive: ['Onda de Caos: Manipula as probabilidades para fortalecer seus feitiços (magia de cores caóticas e mutáveis).', 'Vontade de Dominar: Sua determinação o ajuda a controlar seu poder bruto.', 'Potencial Ilimitado: A adaptabilidade humana se aplica à sua magia, permitindo novas formas de uso.'], negative: ['Fonte Misteriosa: Pode não saber de onde vem seu poder, o que pode ser perigoso.', 'Instabilidade Mágica: Um feitiço mal controlado pode sair terrivelmente errado.', 'Isolamento: Seu poder pode assustar as pessoas, levando à solidão.'] }
                    }
                },
                bruxo: {
                    name: 'Bruxo',
                    description: 'Um conjurador que obteve seu poder através de um pacto com uma entidade poderosa. Bruxos usam segredos arcanos e dons de outro mundo para atingir seus objetivos.',
                    attributePriority: ['charisma', 'constitution', 'dexterity', 'wisdom', 'intelligence', 'strength'],
                    startingEquipment: ["Uma besta leve e 20 virotes", "Uma bolsa de componentes arcanos", "Armadura de couro e uma adaga", "Escolha um: Pacote de Erudito (inclui mochila, livro, tinta, caneta, pergaminho, areia, faca) OU Pacote de Aventureiro (inclui mochila, pé de cabra, martelo, 10 pítons, 10 tochas, rações, cantil)"],
                    startingGold: "4d4 x 10 Ouro (Média: 100 PO)",
                    recommendedRaces: ['humano', 'meio_elfo', 'halfling_pes_leves'],
                    combinations: {
                        humano: { description: 'Movido pela ambição, este bruxo fez um pacto em troca de poder e conhecimento que não poderia obter de outra forma. Um personagem complexo e perigoso.', positive: ['Rajada Mística: Seu ataque principal é um feixe de energia sobrenatural (cor roxa ou verde escura).', 'Dádiva do Patrono: Recebe habilidades únicas e estranhas de sua entidade patrona.', 'Sede de Segredos: É um mestre em descobrir informações ocultas.'], negative: ['Preço a Pagar: Seu poder não é gratuito; seu patrono sempre cobrará o favor.', 'Estigma Social: Pessoas comuns podem temê-lo e desconfiar de sua magia.', 'Poder Emprestado: Se irritar seu patrono, pode perder tudo.'] },
                        meio_elfo: { description: 'Usando seu carisma natural, este bruxo negociou um pacto vantajoso. Ele é um mestre da manipulação, usando seus dons para influenciar e enganar.', positive: ['Charme Sobrenatural: Sua capacidade de encantar pessoas é aprimorada por magia.', 'Visão Sombria: Pode enxergar na escuridão mais profunda, mágica ou não.', 'Mestre das Máscaras: Pode mudar sua aparência para se infiltrar ou enganar.'], negative: ['Teia de Mentiras: Vive uma vida de segredos, o que torna difícil confiar nos outros.', 'Dívida Eterna: O patrono pode ser ciumento e interferir em sua vida pessoal.', 'Sussurros na Mente: A conexão com seu patrono pode, às vezes, ser perturbadora.'] },
                        halfling_pes_leves: { description: 'Este bruxo pode ter tropeçado em seu pacto por acidente ou curiosidade. Ele usa seus poderes de forma sutil, preferindo passar despercebido.', positive: ['Invisibilidade Mágica: Usa os dons de seu patrono para desaparecer completamente.', 'Sorte Estranha: Sua sorte natural de halfling parece ser amplificada por seu poder.', 'Pacto da Furtividade: Suas magias são silenciosas e discretas, perfeitas para um infiltrador.'], negative: ['Pequeno e Assustado: Pode ser intimidado por seu próprio patrono e pelo poder que possui.', 'Pacto Involuntário: Pode não entender completamente os termos de seu acordo.', 'Segredo Pesado: Esconde sua verdadeira natureza de seus amigos e familiares.'] }
                    }
                },
                ladino: {
                    name: 'Ladino',
                    description: 'Um mestre da furtividade, do subterfúgio e da precisão. Ladinos atacam das sombras, desarmam armadilhas e usam sua astúcia para superar qualquer obstáculo.',
                    attributePriority: ['dexterity', 'charisma', 'constitution', 'intelligence', 'wisdom', 'strength'],
                    startingEquipment: ["Uma rapieira", "Um arco curto e 20 flechas", "Armadura de couro, duas adagas e ferramentas de ladrão", "Escolha um: Pacote de Assaltante (mochila, 1.000 esferas de metal, fio, sino, velas, pé de cabra, martelo, lampião, óleo, rações, caixa de fogo, cantil), Pacote de Aventureiro (mochila, pé de cabra, martelo, 10 pítons, 10 tochas, rações, cantil), ou Pacote de Explorador (mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "4d4 x 10 Ouro (Média: 100 PO)",
                    recommendedRaces: ['halfling_pes_leves', 'elfo_alto', 'humano'],
                    combinations: {
                        halfling_pes_leves: { description: 'O ladrão ou espião perfeito. Pequeno, ágil e naturalmente sortudo, este ladino pode se esconder atrás de quase qualquer coisa e passar despercebido.', positive: ['Ataque Oportunista: Um golpe rápido e inesperado com uma adaga em um ponto vital.', 'Sorte dos Pequenos: Pode transformar uma falha crítica em um sucesso.', 'Furtividade Natural: Pode se esconder facilmente, usando até aliados como cobertura.'], negative: ['Força Limitada: Depende da astúcia, não da força.', 'Estatura Baixa: Seu tamanho pode ser uma desvantagem ao tentar intimidar alguém.', 'Tentação Dourada: Pode ter uma fraqueza por objetos brilhantes e bolsos cheios.'] },
                        elfo_alto: { description: 'Um espião elegante ou um assassino arcano. Combinando a destreza élfica com uma mente afiada, ele pode usar um toque de magia para aprimorar suas habilidades.', positive: ['Golpe Arcano: Uma punhalada precisa ou um truque mágico (magia sutil de cor prata).', 'Percepção Aguçada: Seus sentidos élficos tornam quase impossível pegá-lo de surpresa.', 'Mente e Movimento: Usa sua inteligência para desvendar quebra-cabeças e armadilhas.'], negative: ['Fisicamente Frágil: Evita o combate direto.', 'Excesso de Confiança: Sua inteligência e graça podem levar à arrogância.', 'Moralmente Flexível: Opera em áreas cinzentas da lei.'] },
                        humano: { description: 'O faz-tudo do submundo. Seja um ladrão de guilda, um investigador ou um charlatão, o Ladino Humano é ambicioso e habilidoso em várias áreas.', positive: ['Ataque Engenhoso: Usa o ambiente a seu favor para criar distrações.', 'Especialista Versátil: Possui um leque de habilidades mais amplo.', 'Ambição Desmedida: Assume riscos calculados para obter grandes recompensas.'], negative: ['Mestre de Nada: Embora versátil, pode não ser tão especializado quanto outros.', 'Conexões Duvidosas: Seu histórico pode voltar para assombrá-lo.', 'Confiança Traída: Vive em um mundo de segredos, tornando difícil confiar nos outros.'] }
                    }
                },
                mago: {
                    name: 'Mago',
                    description: 'Um estudioso das artes arcanas que manipula a realidade através de feitiços. Magos controlam os elementos, conjuram ilusões e desintegram inimigos com poder arcano bruto.',
                    attributePriority: ['intelligence', 'constitution', 'dexterity', 'wisdom', 'charisma', 'strength'],
                    startingEquipment: ["Um cajado", "Uma bolsa de componentes arcanos", "Um grimório de feitiços", "Escolha um: Pacote de Erudito (inclui mochila, livro de conhecimento, tinta, caneta, 10 folhas de pergaminho, saquinho de areia, faca pequena) OU Pacote de Explorador (inclui mochila, saco de dormir, kit de refeição, tochas, rações, cantil, 15m de corda)"],
                    startingGold: "4d4 x 10 Ouro (Média: 100 PO)",
                    recommendedRaces: ['elfo_alto', 'gnomo_rochas', 'humano'],
                    combinations: {
                        elfo_alto: { description: 'A personificação do poder arcano. O Mago Elfo Alto nasceu com uma afinidade para a magia e passou séculos aperfeiçoando sua arte.', positive: ['Raio de Fogo: Um feixe de energia arcana pura (magia azul ou violeta).', 'Mente Arcana: Sua inteligência e herança mágica lhe dão uma compreensão inata da magia.', 'Tradição Mágica: Conhecedor de uma vasta gama de feitiços.'], negative: ['Corpo Frágil: Seu foco no intelecto o deixou fisicamente vulnerável.', 'Arrogância Intelectual: Pode ver aqueles que não usam magia como inferiores.', 'Dependente de Livros: Sua fonte de poder é seu grimório; perdê-lo é uma catástrofe.'] },
                        gnomo_rochas: { description: 'Um inventor e ilusionista genial. O Mago Gnomo das Rochas combina seu conhecimento arcano com engenharia, criando maravilhas mágicas.', positive: ['Ilusão Menor: Seu truque favorito é criar sons ou imagens (magias sutis, incolores).', 'Engenheiro Arcano: Constrói dispositivos mágicos e entende de mecanismos.', 'Astúcia Gnômica: Sua mente é resistente a feitiços de controle.'], negative: ['Distraído por Invenções: Pode se perder em um projeto, esquecendo-se de perigos.', 'Pequeno e Lento: Seu tamanho pode ser uma desvantagem para fugir.', 'Magia Peculiar: Prefere feitiços inteligentes a bolas de fogo diretas.'] },
                        humano: { description: 'Ambicioso e incansável em sua busca por poder. O Mago Humano compensa a falta de talento inato com trabalho duro, dominando magias mais rápido do que qualquer um.', positive: ['Míssil Mágico: Lança dardos de força mágica (magia ciano brilhante) que nunca erram.', 'Aprendiz Rápido: Sua ambição o impulsiona a dominar novas magias.', 'Especialista Focado: Tende a se especialear em uma escola de magia.'], negative: ['Sede de Poder: Sua busca por conhecimento pode levá-lo a magias perigosas.', 'Vulnerabilidade Física: Extremamente vulnerável a ataques físicos.', 'Isolamento Acadêmico: Suas habilidades sociais podem se atrofiar.'] }
                    }
                }
            };

            const races = {
                anao_colina: { name: 'Anão da Colina', modifiers: { constitution: 2, wisdom: 1 } },
                anao_montanha: { name: 'Anão da Montanha', modifiers: { constitution: 2, strength: 2 } },
                draconato: { name: 'Draconato', modifiers: { strength: 2, charisma: 1 } },
                elfo_alto: { name: 'Elfo Alto', modifiers: { dexterity: 2, intelligence: 1 } },
                elfo_floresta: { name: 'Elfo da Floresta', modifiers: { dexterity: 2, wisdom: 1 } },
                gnomo_rochas: { name: 'Gnomo das Rochas', modifiers: { intelligence: 2, constitution: 1 } },
                halfling_pes_leves: { name: 'Halfling Pés Leves', modifiers: { dexterity: 2, charisma: 1 } },
                halfling_robusto: { name: 'Halfling Robusto', modifiers: { dexterity: 2, constitution: 1 } },
                humano: { name: 'Humano', modifiers: { strength: 1, dexterity: 1, constitution: 1, intelligence: 1, wisdom: 1, charisma: 1 } },
                meio_elfo: { name: 'Meio-Elfo', modifiers: { charisma: 2, _choice: 2 } }, // _choice representa 2 atributos +1 à escolha
                meio_orc: { name: 'Meio-Orc', modifiers: { strength: 2, constitution: 1 } },
            };

            const quizQuestions = [
                {
                    question: "Diante de um desafio, qual sua primeira reação?",
                    answers: [
                        { text: "Resolver com força bruta e um grito de guerra.", points: { barbaro: 2, guerreiro: 1 } },
                        { text: "Analisar, traçar um plano e executá-lo com perfeição.", points: { guerreiro: 2, mago: 1 } },
                        { text: "Observar das sombras e agir no momento certo.", points: { ladino: 2, patrulheiro: 1 } },
                        { text: "Inspirar meus companheiros com um discurso ou uma canção.", points: { bardo: 2, paladino: 1 } },
                    ]
                },
                {
                    question: "Sua fonte de poder vem...",
                    answers: [
                        { text: "Do meu corpo e mente, através de anos de disciplina.", points: { monge: 2, guerreiro: 1 } },
                        { text: "De um juramento sagrado a uma causa maior que eu.", points: { paladino: 2, clerigo: 1 } },
                        { text: "Da minha conexão com a natureza e o mundo selvagem.", points: { druida: 2, patrulheiro: 1 } },
                        { text: "De um poder que simplesmente nasceu comigo, correndo em minhas veias.", points: { feiticeiro: 2 } },
                    ]
                },
                {
                    question: "Que tipo de magia mais lhe atrai?",
                    answers: [
                        { text: "Magia que vem do estudo e do intelecto, precisa e controlada.", points: { mago: 2 } },
                        { text: "Magia concedida pela fé em uma divindade ou ideal.", points: { clerigo: 2, paladino: 1 } },
                        { text: "Magia vinda de um pacto com uma entidade de outro mundo.", points: { bruxo: 2 } },
                        { text: "Magia que usa a música e as palavras para encantar e iludir.", points: { bardo: 2 } },
                    ]
                },
                 {
                    question: "Em um grupo, você naturalmente assume o papel de...",
                    answers: [
                        { text: "O protetor da linha de frente, o escudo do grupo.", points: { guerreiro: 2, paladino: 1, barbaro: 1 } },
                        { text: "O especialista sorrateiro, que cuida de armadilhas e segredos.", points: { ladino: 2 } },
                        { text: "O guia sábio, que entende os caminhos da natureza.", points: { patrulheiro: 2, druida: 1 } },
                        { text: "O rosto do grupo, o diplomata que usa o carisma para resolver problemas.", points: { bardo: 2, feiticeiro: 1, bruxo: 1 } },
                    ]
                },
                {
                    question: "Seu estilo de combate ideal é...",
                    answers: [
                        { text: "Com armas marciais, focado na técnica e em múltiplos ataques.", points: { guerreiro: 2, monge: 1 } },
                        { text: "Usando meus punhos e pés em uma dança de golpes rápidos.", points: { monge: 2 } },
                        { text: "À distância, controlando o campo de batalha com feitiços devastadores.", points: { mago: 2, feiticeiro: 1, bruxo: 1 } },
                        { text: "Transformando-me em uma fera poderosa e dilacerando meus inimigos.", points: { druida: 2 } }
                    ]
                },
            ];

            // --- FUNÇÕES DO QUIZ ---

            function startQuiz() {
                currentQuestionIndex = 0;
                classScores = { 
                    barbaro: 0, bardo: 0, clerigo: 0, druida: 0, guerreiro: 0, 
                    monge: 0, paladino: 0, patrulheiro: 0, feiticeiro: 0, bruxo: 0, 
                    ladino: 0, mago: 0 
                };
                startScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                displayQuestion();
            }

            function displayQuestion() {
                if (currentQuestionIndex >= quizQuestions.length) {
                    showClassResult();
                    return;
                }

                const question = quizQuestions[currentQuestionIndex];
                questionTitle.innerText = question.question;
                answerButtons.innerHTML = '';

                question.answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.innerText = answer.text;
                    button.addEventListener('click', () => selectAnswer(answer.points));
                    answerButtons.appendChild(button);
                });
            }

            function selectAnswer(points) {
                for (const className in points) {
                    if(classScores.hasOwnProperty(className)) {
                        classScores[className] += points[className];
                    }
                }

                currentQuestionIndex++;
                displayQuestion();
            }

            function showClassResult() {
                selectedClassKey = Object.keys(classScores).reduce((a, b) => classScores[a] > classScores[b] ? a : b);
                const resultClass = classes[selectedClassKey];

                quizScreen.classList.add('hidden');
                classResultScreen.classList.remove('hidden');

                document.getElementById('class-title').innerText = `Sua classe é: ${resultClass.name}`;
                document.getElementById('class-description').innerText = resultClass.description;

                const raceSelection = document.getElementById('race-selection');
                raceSelection.innerHTML = '';
                resultClass.recommendedRaces.forEach(raceKey => {
                    const race = races[raceKey];
                    const raceCard = document.createElement('div');
                    raceCard.classList.add('race-card');
                    raceCard.innerHTML = `<h4>${race.name}</h4><p>${resultClass.combinations[raceKey].description.substring(0, 100)}...</p>`;
                    raceCard.addEventListener('click', () => selectRace(raceKey));
                    raceSelection.appendChild(raceCard);
                });
            }

            function selectRace(raceKey) {
                selectedRaceKey = raceKey;
                classResultScreen.classList.add('hidden');
                finalSummaryScreen.classList.remove('hidden');
                displayFinalSummary();
            }

            function displayFinalSummary() {
                const finalClass = classes[selectedClassKey];
                const finalRace = races[selectedRaceKey];
                const combination = finalClass.combinations[selectedRaceKey];

                document.getElementById('summary-title').innerText = `${finalClass.name} ${finalRace.name}`;
                document.getElementById('summary-combination-description').innerText = combination.description;
                
                const positiveList = document.getElementById('positive-traits');
                positiveList.innerHTML = '';
                combination.positive.forEach(trait => {
                    const li = document.createElement('li');
                    li.innerText = trait;
                    positiveList.appendChild(li);
                });

                const negativeList = document.getElementById('negative-traits');
                negativeList.innerHTML = '';
                combination.negative.forEach(trait => {
                    const li = document.createElement('li');
                    li.innerText = trait;
                    negativeList.appendChild(li);
                });
                
                // Preencher Equipamento Inicial
                const equipmentList = document.getElementById('equipment-list');
                const startingGoldP = document.getElementById('starting-gold');
                
                equipmentList.innerHTML = '';
                finalClass.startingEquipment.forEach(item => {
                    const li = document.createElement('li');
                    li.innerText = item;
                    equipmentList.appendChild(li);
                });

                startingGoldP.innerText = `Riqueza Inicial: ${finalClass.startingGold}`;

                const baseScores = {};
                const abilityScores = [15, 14, 13, 12, 10, 8];
                const priority = finalClass.attributePriority;

                priority.forEach((attr, index) => {
                    baseScores[attr] = abilityScores[index];
                });

                for(const attr in finalRace.modifiers) {
                    if(attr !== '_choice') {
                        baseScores[attr] += finalRace.modifiers[attr];
                    }
                    // O Meio-Elfo é um caso especial que exigiria interface de usuário para escolher os bônus,
                    // então estamos simplificando aqui, mas a estrutura permite a adição futura.
                }
                
                let modifiersText = '';
                const displayOrder = ['strength', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'charisma'];
                
                displayOrder.forEach(attr => {
                    const finalScore = baseScores[attr];
                    const modifier = Math.floor((finalScore - 10) / 2);
                    const translatedAttr = attributeTranslations[attr];
                    modifiersText += `<strong>${translatedAttr}:</strong> ${modifier >= 0 ? '+' : ''}${modifier} &nbsp;&nbsp; `;
                });

                document.getElementById('final-modifiers').innerHTML = modifiersText.trim();
            }

            function generatePDF() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const title = document.getElementById('summary-title').innerText;
                const description = document.getElementById('summary-combination-description').innerText;
                const modifiersText = document.getElementById('final-modifiers').innerText.replace(/\s+/g, ' ').trim();

                const positiveTraits = Array.from(document.querySelectorAll('#positive-traits li')).map(li => `- ${li.innerText}`);
                const negativeTraits = Array.from(document.querySelectorAll('#negative-traits li')).map(li => `- ${li.innerText}`);
                const equipment = Array.from(document.querySelectorAll('#equipment-list li')).map(li => `- ${li.innerText}`);
                const gold = document.getElementById('starting-gold').innerText;

                let y = 20;
                const page_width = doc.internal.pageSize.getWidth();
                const margin = 15;

                // Título
                doc.setFont('times', 'bold');
                doc.setFontSize(22);
                doc.text(title, page_width / 2, y, { align: 'center' });
                y += 10;
                
                // Descrição
                doc.setFont('times', 'normal');
                doc.setFontSize(12);
                const descLines = doc.splitTextToSize(description, page_width - (margin * 2));
                doc.text(descLines, margin, y);
                y += (descLines.length * 5) + 5;

                // Modificadores
                doc.setFont('times', 'bold');
                doc.text("Modificadores de Atributo", margin, y);
                y += 6;
                doc.setFont('times', 'normal');
                doc.text(modifiersText, margin, y);
                y += 10;

                // Características
                doc.setFont('times', 'bold');
                doc.text("Características Positivas", margin, y);
                y += 6;
                doc.setFont('times', 'normal');
                doc.text(positiveTraits.join('\n'), margin, y);
                y += (positiveTraits.length * 5) + 5;
                
                doc.setFont('times', 'bold');
                doc.text("Características Negativas", margin, y);
                y += 6;
                doc.setFont('times', 'normal');
                doc.text(negativeTraits.join('\n'), margin, y);
                y += (negativeTraits.length * 5) + 10;
                
                // Equipamento
                doc.setFont('times', 'bold');
                doc.text("Equipamento Inicial", margin, y);
                y += 6;
                doc.setFont('times', 'normal');
                const equipLines = doc.splitTextToSize(equipment.join('\n'), page_width - (margin * 2));
                doc.text(equipLines, margin, y);
                y += (equipLines.length * 5) + 5;

                // Riqueza
                doc.setFont('times', 'bold');
                doc.text(gold, margin, y);

                doc.save('ficha_de_personagem.pdf');
            }
            
            function restartQuiz() {
                finalSummaryScreen.classList.add('hidden');
                startScreen.classList.remove('hidden');
            }

            startBtn.addEventListener('click', startQuiz);
            restartBtn.addEventListener('click', restartQuiz);
            savePdfBtn.addEventListener('click', generatePDF);
        });
    </script>
</body>
</html>

